:_mod-docs-content-type: ASSEMBLY
[id="otel-collector-connectors"]
= Connectors
include::_attributes/common-attributes.adoc[]
:context: otel-collector-connectors

toc::[]

A connector connects two pipelines. It consumes data as an exporter at the end of one pipeline and emits data as a receiver at the start of another pipeline. It can consume and emit data of the same or different data type. It can generate and emit data to summarize the consumed data, or it can merely replicate or route data.

[id="routing-connector_{context}"]
== Routing Connector

:FeatureName: The Routing Connector
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with an enabled Routing Connector
[source,yaml]
----
  config: |
    connectors:
      routing:
        table: <1>
          - statement: route() where attributes["X-Tenant"] == "dev" <2>
            pipelines: [traces/dev] <3>
          - statement: route() where attributes["X-Tenant"] == "prod"
            pipelines: [traces/prod]
        default_pipelines: [traces/dev] <4>
        error_mode: ignore <5>
        match_once: false <6>
    service:
      pipelines:
        traces/in:
          receivers: [otlp]
          exporters: [routing]
        traces/dev:
          receivers: [routing]
          exporters: [otlp/dev]
        traces/prod:
          receivers: [routing]
          exporters: [otlp/prod]
----
<1> Connector routing table.
<2> Routing condition writen as OTTL statement.
<3> Pipelines where the matching telemetry data will be exported.
<4> Pipeline where the telemetry data will be sent when none of the conditions is satisfied.
<5> Determines how the error should be managed. `propagate` (default) will log an error and drop the payload. `ignore` will ignore the condition and try to match with the next one.  `silent` will do the same as `ignore` but without logging the error.
<6>  When enabled (default is `false`), the payload will be routed only to the first pipeline whose routing condition is met.

[id="forward-connector_{context}"]
== Forward Connector

The Forward Connector merges two pipelines of the same type.

:FeatureName: The Forward Connector
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with an enabled Forward Connector
[source,yaml]
----
# ...
receivers:
  otlp:
    protocols:
      grpc:
  jaeger:
    protocols:
      grpc:
processors:
  batch:
exporters:
  otlp:
    endpoint: tempo-simplest-distributor:4317
    tls:
      insecure: true
connectors:
  forward:
service:
  pipelines:
    traces/regiona:
      receivers: [otlp]
      processors: []
      exporters: [forward]
    traces/regionb:
      receivers: [jaeger]
      processors: []
      exporters: [forward]
    traces:
      receivers: [forward]
      processors: [batch]
      exporters: [otlp]
# ...
----

[id="spanmetrics-connector_{context}"]
== Spanmetrics Connector

The Spanmetrics Connector aggregates Request, Error, and Duration (R.E.D) OpenTelemetry metrics from span data.

:FeatureName: The Spanmetrics Connector
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with an enabled Spanmetrics Connector
[source,yaml]
----
# ...
  config: |
    connectors:
      spanmetrics:
        metrics_flush_interval: 15s # <1>
    service:
      pipelines:
        traces:
          exporters: [spanmetrics]
        metrics:
          receivers: [spanmetrics]
# ...
----
<1> Defines the flush interval of the generated metrics. Defaults to `15s`.
