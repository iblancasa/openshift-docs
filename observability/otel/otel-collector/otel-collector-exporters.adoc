:_mod-docs-content-type: ASSEMBLY
[id="otel-collector-exporters"]
= Exporters
include::_attributes/common-attributes.adoc[]
:context: otel-collector-exporters

toc::[]

Exporters send data to one or more back ends or destinations. An exporter can be push or pull based. By default, no exporters are configured. One or more exporters must be configured. Exporters can support one or more data sources. Exporters might be used with their default settings, but many exporters require configuration to specify at least the destination and security settings.

[id="load-balancing-exporter_{context}"]
== Load Balancing Exporter

The Load Balancing Exporter exports spans, metrics, and logs based on the `routing_key` configuration.

:FeatureName: The Load Balancing Exporter
include::snippets/technology-preview.adoc[leveloffset=+1]

.OpenTelemetry Collector custom resource with an enabled Load Balancing Exporter
[source,yaml]
----
# ...
  config: |
    exporters:
      loadbalancing:
        routing_key: "service"
        protocol:
          otlp: # <1>
            timeout: 1s
        resolver: # <2>
          static: # <3>
            hostnames:
            - backend-1:4317
            - backend-2:4317
          dns: # <4>
            hostname: otelcol-headless.observability.svc.cluster.local
          k8s: # <5>
            service: lb-svc.kube-public
            ports:
              - 15317
              - 16317
# ...
----
<1> The OTLP protocol is supported for load balancing.
<2> Only one resolver can be configured.
<3> The static resolver distributes load using a fixed list of backends.
<4> The DNS resolver is compatible with Kubernetes headless services.
<5> The Kubernetes resolver is recommended for dynamic environments.

This exporter will export signals (spans, metrics, logs) based on the configured `routing_key`.

.Supported `routing_key` options
[cols="1,2", options="header"]
|===
| `routing_key` | Can be used for 
| `service`     | logs, spans, metrics 
| `traceID`     | logs, spans
| `resource`    | metrics
| `metric`      | metrics
| `streamID`    | metrics
|===

If no `routing_key` is specified, the default behavior is `traceID` for traces and `service` for metrics. This ensures that signals from the same trace or service reach the same backend.

The load balancing exporter requires backend information, either via a static list of backends or a DNS-based resolver (e.g., a Kubernetes headless service). DNS resolution periodically updates the backend list.

The exporter makes routing decisions based on the trace ID or service name. Backend load is not taken into consideration, but load distribution is expected to be stable, with less than 5% deviation.

This exporter is particularly useful for backends with tail-based samplers or red-metrics-collectors, which need visibility into full traces.

When the backend list changes, some signals are rerouted to different backends. he number of rerouted paths is approximately `R/N`, where:

* `R` is the total number of routes (trace IDs or service names mapped to a backend).
* `N` is the total number of backends.

This load balancer supports service name-based routing for traces. In scenarios where spanmetrics connectors generate metrics and push them to Prometheus, routing based on `service` avoids label collisions caused by multiple collectors seeing the same `service+operation` labels.

The following metrics are generated when this exporter is in use:

- `otelcol_loadbalancer_num_resolutions`: Total number of resolutions performed by the resolver (tagged by resolver and success status).
- `otelcol_loadbalancer_num_backends`: Number of active backends. For static resolvers, this should match the configuration.
- `otelcol_loadbalancer_num_backend_updates`: Number of backend list updates. High update frequency may indicate an issue with the load balancer.
- `otelcol_loadbalancer_backend_latency`: Measures backend latency.
- `otelcol_loadbalancer_backend_outcome`: Tracks the success or failure (success=true|false) for each backend endpoint.

The `loadbalancingexporter` creates an exporter per backend, conforming to the configured send queue and retry mechanisms. However, failed delivery to an endpoint can result in data loss if the target remains unavailable after retries are exhausted.

* When using the `static` resolver, all telemetry routed to an unavailable backend will fail until the backend is restored or removed.
* The `dns` and `k8s` resolvers periodically update the list of available backends. The `k8s` resolver is generally faster to react than the `dns` resolver, but a temporary mismatch between the exporter's view and the actual topology may occur.


.Parameters used by the Load Balancing Exporter
[options="header"]
[cols="a,a,a"]
|===
|Parameter |Description |Default

|`routing_key`
|Determines how the load balancer distributes the telemetry signals. Options include `service`, `traceID`, `metric`, `resource`, and `streamID`.
|`traceID`

|`protocol.otlp`
|OTLP configuration fields are supported.
|N/A

|`resolver`
|Only one resolver can be configured.
|N/A

|`resolver.static.hostnames`
|The static resolver assigns load based on a fixed list of backends.
|N/A

|`resolver.dns.hostname`
|The DNS resolver is compatible with Kubernetes headless services.
|N/A

|`resolver.k8s.service`
|Specifies the Kubernetes service for the Kubernetes resolver.
|N/A

|`resolver.k8s.ports`
|Lists the ports for the Kubernetes resolver.
|N/A
|===

[id="otlp-exporter_{context}"]
== OTLP Exporter

The OTLP gRPC Exporter exports traces and metrics by using the OpenTelemetry protocol (OTLP).

.OpenTelemetry Collector custom resource with an enabled OTLP Exporter
[source,yaml]
----
# ...
  config: |
    exporters:
      otlp:
        endpoint: tempo-ingester:4317 # <1>
        tls: # <2>
          ca_file: ca.pem
          cert_file: cert.pem
          key_file: key.pem
          insecure: false # <3>
          insecure_skip_verify: false # # <4>
          reload_interval: 1h # <5>
          server_name_override: <name> # <6>
        headers: # <7>
          X-Scope-OrgID: "dev"
    service:
      pipelines:
        traces:
          exporters: [otlp]
        metrics:
          exporters: [otlp]
# ...
----
<1> The OTLP gRPC endpoint. If the `+https://+` scheme is used, then client transport security is enabled and overrides the `insecure` setting in the `tls`.
<2> The client-side TLS configuration. Defines paths to TLS certificates.
<3> Disables client transport security when set to `true`. The default value is `false` by default.
<4> Skips verifying the certificate when set to `true`. The default value is `false`.
<5> Specifies the time interval at which the certificate is reloaded. If the value is not set, the certificate is never reloaded. The `reload_interval` accepts a string containing valid units of time such as `ns`, `us` (or `Âµs`), `ms`, `s`, `m`, `h`.
<6> Overrides the virtual host name of authority such as the authority header field in requests. You can use this for testing.
<7> Headers are sent for every request performed during an established connection.

[id="otlp-http-exporter_{context}"]
== OTLP HTTP Exporter

The OTLP HTTP Exporter exports traces and metrics by using the OpenTelemetry protocol (OTLP).

.OpenTelemetry Collector custom resource with an enabled OTLP Exporter
[source,yaml]
----
# ...
  config: |
    exporters:
      otlphttp:
        endpoint: http://tempo-ingester:4318 # <1>
        tls: # <2>
        headers: # <3>
          X-Scope-OrgID: "dev"
        disable_keep_alives: false <4>

    service:
      pipelines:
        traces:
          exporters: [otlphttp]
        metrics:
          exporters: [otlphttp]
# ...
----
<1> The OTLP HTTP endpoint. If the `+https://+` scheme is used, then client transport security is enabled and overrides the `insecure` setting in the `tls`.
<2> The client side TLS configuration. Defines paths to TLS certificates.
<3> Headers are sent in every HTTP request.
<4> If true, disables HTTP keep-alives. It will only use the connection to the server for a single HTTP request.

[id="debug-exporter_{context}"]
== Debug Exporter

The Debug Exporter prints traces and metrics to the standard output.

.OpenTelemetry Collector custom resource with an enabled Debug Exporter
[source,yaml]
----
# ...
  config: |
    exporters:
      debug:
        verbosity: detailed # <1>
    service:
      pipelines:
        traces:
          exporters: [logging]
        metrics:
          exporters: [logging]
# ...
----
<1> Verbosity of the debug export: `detailed` or `normal` or `basic`. When set to `detailed`, pipeline data is verbosely logged. Defaults to `normal`.

[id="prometheus-exporter_{context}"]
== Prometheus Exporter

The Prometheus Exporter exports metrics in the Prometheus or OpenMetrics formats.

:FeatureName: The Prometheus Exporter
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with an enabled Prometheus Exporter
[source,yaml]
----
# ...
  ports:
  - name: promexporter # <1>
    port: 8889
    protocol: TCP
  config: |
    exporters:
      prometheus:
        endpoint: 0.0.0.0:8889 # <2>
        tls: # <3>
          ca_file: ca.pem
          cert_file: cert.pem
          key_file: key.pem
        namespace: prefix # <4>
        const_labels: # <5>
          label1: value1
        enable_open_metrics: true # <6>
        resource_to_telemetry_conversion: # <7>
          enabled: true
        metric_expiration: 180m # <8>
        add_metric_suffixes: false # <9>
    service:
      pipelines:
        metrics:
          exporters: [prometheus]
# ...
----
<1> Exposes the Prometheus port from the Collector pod and service. You can enable scraping of metrics by Prometheus by using the port name in `ServiceMonitor` or `PodMonitor` custom resource.
<2> The network endpoint where the metrics are exposed.
<3> The server-side TLS configuration. Defines paths to TLS certificates.
<4> If set, exports metrics under the provided value. No default.
<5> Key-value pair labels that are applied for every exported metric. No default.
<6> If `true`, metrics are exported using the OpenMetrics format. Exemplars are only exported in the OpenMetrics format and only for histogram and monotonic sum metrics such as `counter`. Disabled by default.
<7> If `enabled` is `true`, all the resource attributes are converted to metric labels by default. Disabled by default.
<8> Defines how long metrics are exposed without updates. The default is `5m`.
<9> Adds the metrics types and units suffixes. Must be disabled if the monitor tab in Jaeger console is enabled. The default is `true`.

[id="prometheus-remote-write-exporter_{context}"]
== Prometheus Remote Write Exporter

The Prometheus Remote Write Exporter exports metrics to compatible back ends.

:FeatureName: The Prometheus Remote Write Exporter
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with an enabled Prometheus Remote Write Exporter
[source,yaml]
----
# ...
  config: |
    exporters:
      prometheusremotewrite:
        endpoint: "https://my-prometheus:7900/api/v1/push" # <1>
        tls: # <2>
          ca_file: ca.pem
          cert_file: cert.pem
          key_file: key.pem
        target_info: true # <3>
        export_created_metric: true # <4>
        max_batch_size_bytes: 3000000 # <5>
    service:
      pipelines:
        metrics:
          exporters: [prometheusremotewrite]
# ...
----
<1> Endpoint for sending the metrics.
<2> Server-side TLS configuration. Defines paths to TLS certificates.
<3> When set to `true`, creates a `target_info` metric for each resource metric.
<4> When set to `true`, exports a `_created` metric for the Summary, Histogram, and Monotonic Sum metric points.
<5> Maximum size of the batch of samples that is sent to the remote write endpoint. Exceeding this value results in batch splitting. The default value is `3000000`, which is approximately 2.861 megabytes.

[WARNING]
====
* This exporter drops non-cumulative monotonic, histogram, and summary OTLP metrics.

* You must enable the `--web.enable-remote-write-receiver` feature flag on the remote Prometheus instance. Without it, pushing the metrics to the instance using this exporter fails.
====

[id="kafka-exporter_{context}"]
== Kafka Exporter

The Kafka Exporter exports logs, metrics, and traces to Kafka. This exporter uses a synchronous producer that blocks and does not batch messages. You must use it with batch and queued retry processors for higher throughput and resiliency.

:FeatureName: The Kafka Exporter
include::snippets/technology-preview.adoc[]

.OpenTelemetry Collector custom resource with an enabled Kafka Exporter
[source,yaml]
----
# ...
  config: |
    exporters:
      kafka:
        brokers: ["localhost:9092"] # <1>
        protocol_version: 2.0.0 # <2>
        topic: otlp_spans # <3>
        auth:
          plain_text: # <4>
            username: example
            password: example
          tls: # <5>
            ca_file: ca.pem
            cert_file: cert.pem
            key_file: key.pem
            insecure: false # <6>
            server_name_override: kafka.example.corp # <7>
    service:
      pipelines:
        traces:
          exporters: [kafka]
# ...
----
<1> The list of Kafka brokers. The default is `+localhost:9092+`.
<2> The Kafka protocol version. For example, `+2.0.0+`. This is a required field.
<3> The name of the Kafka topic to read from. The following are the defaults: `+otlp_spans+` for traces, `+otlp_metrics+` for metrics, `+otlp_logs+` for logs.
<4> The plain text authentication configuration. If omitted, plain text authentication is disabled.
<5> The client-side TLS configuration. Defines paths to the TLS certificates. If omitted, TLS authentication is disabled.
<6> Disables verifying the server's certificate chain and host name. The default is `+false+`.
<7> ServerName indicates the name of the server requested by the client to support virtual hosting.

[role="_additional-resources"]
[id="additional-resources_otel-collector-exporters_{context}"]
== Additional resources
* link:https://opentelemetry.io/docs/specs/otlp/[OpenTelemetry Protocol (OTLP) documentation]
